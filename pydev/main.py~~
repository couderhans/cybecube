import git
import json
import database

import sys, getopt

def main(argv):
    try:
        opts, args = getopt.getopt(argv,"c:d:",["create=","delete="])
    except getopt.GetoptError as optE:
        print('getopt error {}'.format(optE.args[0]))
        sys.exit(2)
    for opt, arg in opts:
        if opt in ('-d','--delete'):
            database.delete_table(arg)

if __name__ == '__name__':
    data = git.get_repos_from_user('couderhans')    
    print('data 1st element: {}'.format(data[0]))
    for element in data:
        print('repository: {} /r'.format(element['name']))
        print('clone_url: {}'.format(element['clone_url']))
        repos = (0,element['name'],element['clone_url'])
        database.insert_into_repositories(repos)
